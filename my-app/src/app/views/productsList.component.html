<div>
	<h1 class="products-list-title">{{selectedCategory}}</h1>
	<div className="products-list-filters">
		<select [(ngModel)]="sort" (ngModelChange)="sortBy($event)" class="form-control">
			<option value="0">Price: Low to High</option>
			<option value="1">Price: High to Low</option>
			<option value="2"> Avg. Customer Review</option>
		</select>
	</div>
	
	<div class="products-list-container">
		<!-- LOADING -->
		<div *ngIf="loading && !products" class="loader-container"><i class="fas fa-spinner fa-pulse loader-margin"></i></div>
		<!-- NO RESULT -->
		<div *ngIf="!loading && products && !products.length" class="loader-container">No result</div>

		<!-- Actual Items -->
		<div class="products-list-items-container">
            <div class="products-list-item" *ngFor="let product of currentPage">
               <h5 class="products-list-item-name">{{product.name}}</h5>
			</div>
		</div>
	</div>
	<div class="wthreeproductdisplay">
			<div id="cbp-pgcontainer" class="cbp-pgcontainer">

				<ul class="cbp-pggrid">
					<li class="wthree aits w3l" *ngFor="let product of currentPage">
						<div class="cbp-pgcontent">
							<a class="pointer-cursor" (click)="selectProduct(product)">
								<div class="cbp-pgitem a3ls">
									<div class="cbp-pgitem-flip" (mouseenter)="product.secondPhoto = true" (mouseleave)="product.secondPhoto = null">
										<img *ngIf="!product.xlImage2 || product.xlImage2 === '{}'" src="{{'images/main/' + product.image}}" alt="{{product.name}}">
										<img *ngIf="(product.xlImage2 &&  product.xlImage2 !== '{}') && (!product.secondPhoto || (!product.xlImage3 || product.xlImage3 === '{}'))" src="{{'images/hires/' + product.xlImage2}}" alt="{{product.name}}">
										<img *ngIf="product.secondPhoto && (product.xlImage3 && product.xlImage3 !== '{}')" src="{{'images/hires/' + product.xlImage3}}" alt="{{product.name}}">
									</div>
								</div>
							</a>
						</div>
						<div class="cbp-pginfo w3layouts">
							<h3 class="pointer-cursor" (click)="selectProduct(product)">{{product.name}}</h3>
							<span class="cbp-pgprice">Â£{{product.rpr}}</span>
							<span *ngIf="!warehouse.stockByProductId[product.id]" style="color:red;">Out Of Stock</span>
							<button [disabled]="!warehouse.stockByProductId[product.id]" class="pointer-cursor" style="color: brown;font-size: 2em;float:right;border:none;background:none;" (click)="basket.addToBasket(1, product)">
								<i class="fa fa-cart-plus" aria-hidden="true"></i>
								
							</button>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="pages-index-container">
		<ul class="page-selection">
			<li class="pages-index" *ngIf="pageSelected !== 0" (click)="goToStartEnd(true)"><i class="fas fa-angle-double-left"></i></li>
			<li class="pages-index" *ngIf="pageSelected !== 0" (click)="moveByOnePage(true)"><i class="fas fa-angle-left"></i></li>
			<li class="pages-index" [ngClass]="{'page-selected': pageSelected === pageIndex}" *ngFor="let pageIndex of pagesIndex" (click)="changePage(pageIndex)">{{pageIndex + 1}}</li>
			<li class="pages-index" *ngIf="pageSelected !== pages.length - 1" (click)="moveByOnePage(false)"><i class="fas fa-angle-right"></i></li>
			<li class="pages-index" *ngIf="pageSelected !== pages.length - 1" (click)="goToStartEnd(false)"><i class="fas fa-angle-double-right"></i></li>
		</ul>
	</div>


<!-- TODO
	1. Remove changing photo on hover
	2. Simplify html structure
	3. Add link on click
	4. Create function for getting product photo
	5. Simplify moving by one page
	6. Change styles for page numbers
 -->
